@model WebApp.Models.SearchUserModelList

@{
    <h2> Welcome to Pronouncian Page </h2>
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>
<body>

    @if (@Model != null)
    {
        <br />
        <br />

        <table id="tblGrid" style="border: 1px solid #999" cellpadding="1">
            <thead>
                <tr>
                    <td colspan="4">
                        <span id="msg"></span>
                    </td>
                    <td colspan="3">
                        <input type="text" id="txtSearch" />
                    </td>
                    <td>
                        <input type="button" id="btnSearch" value="Search" /> @*onclick='SearchUser(this)'*@
                    </td>
                </tr>
                <tr>
                    <td colspan="4"></td>
                </tr>
                <tr>
                    <th>Name</th>
                    <th>LanId</th>
                    <th>Employee Number</th>
                    <th>Email</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var data in @Model.SearchUserData)
                {
                    <tr>
                        <td>@data.Name </td>
                        <td>@data.LanId </td>
                        <td>@data.EmpNum </td>
                        <td>@data.Email </td>
                    </tr>

                }

            </tbody>
        </table>

    }

    <script>

        function SearchUser() {
            //var options = {};
            //options.url = "/PronounceName/SearchUser";
            //options.type = "POST";
            //console.dir($("#txtSearch").val());
            //options.data = JSON.stringify($("#txtSearch").val());
            //options.contentType = "application/json";
            //options.dataType = "html";

            //options.success = function (msg) {
            //   // $("#msg").html(msg);
            //},
            //    options.error = function () {
            //        $("#msg").html("Error while calling the Web API!");
            //    };
            //$.ajax(options);

            var url = "/PronounceName/SearchUser";
            var query = $("#txtSearch").val();
            $.post(url, { qry: query }, function (data) {
                // $("#msg").html(data);
            });
        }

        $('#btnSearch').click(function (e) {
            //e.preventDefault(); // <------------------ stop default behaviour of button
            var element = this;
            var query = $("#txtSearch").val();

            $.ajax({
                url: "/PronounceName/SearchUser",
                type: "POST",
                data: JSON.stringify({ 'qry': query }),
                dataType: "json",
                traditional: true,
                contentType: "application/json; charset=utf-8",

                success: function (data) {
                    if (data.status == "Success") {
                        alert("Success");
                        //$(element).closest("form").submit(); //<------------ submit form
                    } else {
                        alert("Error!");
                    }
                },
                error: function () {
                    alert("An error has occured!!!");
                }
            });
        });

    </script>

</body>
</html>   